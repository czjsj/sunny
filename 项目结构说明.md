# 数字孪生变电站项目结构说明

> 这是一个基于 Vue.js 和 Three.js 构建的数字孪生变电站监控平台项目。

## 项目概述

本项目是一个专业的数字孪生可视化平台，专注于变电站设施的 3D 可视化和实时监控。项目基于 `vue-element-admin` 框架构建，集成了 Three.js、ECharts 和 data-view 等多个可视化库，提供沉浸式的数字孪生体验。

### 技术栈

- **前端框架**: Vue 2.6.10 + Vue Router + Vuex
- **UI 组件库**: Element UI 2.13.2
- **3D 图形引擎**: Three.js ^0.133.1
- **数据可视化**: ECharts 4.2.1, @antv/g2plot, @jiaminghi/data-view
- **构建工具**: Vue CLI 4.4.4 + Webpack
- **样式预处理**: Sass/SCSS
- **HTTP 客户端**: Axios
- **测试框架**: Jest
- **Mock 服务**: MockJS

## 项目目录结构

```
DigitalTwin-Code/
├── build/                   # 构建配置文件
├── public/                  # 静态资源目录
├── src/                     # 源代码目录
├── mock/                    # Mock API 服务
├── tests/                   # 测试文件
├── .env*                    # 环境变量配置
├── babel.config.js          # Babel 配置
├── jest.config.js           # Jest 测试配置
├── package.json             # 项目依赖和脚本
├── vue.config.js            # Vue CLI 配置
└── 项目结构说明.md           # 本文档
```

## 核心目录详解

### 1. `/src` - 源代码目录

#### 1.1 核心框架结构
```
src/
├── main.js                  # 应用入口文件
├── App.vue                  # 根组件
├── router/                  # Vue Router 路由配置
│   └── modules/             # 路由模块
├── store/                   # Vuex 状态管理
│   └── modules/             # 状态模块
├── layout/                  # 布局组件
│   ├── Layout.vue           # 标准管理后台布局
│   └── BSCLayout.vue        # 数字孪生基础布局（极简框架）
├── api/                     # API 服务层
├── components/              # 可复用组件
├── utils/                   # 工具函数
└── views/                   # 页面视图组件
```

#### 1.2 数字孪生核心模块
```
src/views/sunny/Digital Twin/
├── index.vue                # 数字孪生主界面
├── components/              # 数字孪生专用组件
├── effects/                 # 视觉效果和动画
├── environment/             # 3D 环境设置
├── interaction/             # 用户交互处理
├── rendering/               # 渲染优化
├── shaders/                 # GLSL 着色器
├── styles/                  # 数字孪生专用样式
├── images/                  # 数字孪生图片资源
└── 优化MD文档/               # 优化相关文档
```

#### 1.3 工具库
```
src/utils/
├── threejs/                 # Three.js 工具集
│   └── hjx/                 # 自定义 Three.js 模块
│       ├── building.js      # 建筑模块
│       └── map/             # 地图相关工具
└── request.js               # Axios HTTP 客户端配置
```

#### 1.4 可复用组件库
```
src/components/
├── Charts/                  # 图表组件
├── Breadcrumb/              # 面包屑导航
├── ErrorLog/                # 错误日志记录
├── ImageCropper/            # 图片编辑
├── JsonEditor/              # JSON 编辑器
├── Pagination/              # 分页控件
├── Screenfull/              # 全屏功能
├── ThemePicker/             # 主题选择器
├── Tinymce/                 # 富文本编辑器
└── Upload/                  # 文件上传组件
```

### 2. `/public` - 静态资源目录

```
public/
├── sunny-substation/        # 3D 场景资源
│   ├── models/              # 3D 模型文件
│   │   ├── *.fbx           # FBX 格式模型
│   │   └── *.glb           # GLB 格式模型
│   ├── images/              # 贴图和环境贴图
│   │   ├── *.hdr           # HDR 天空盒
│   │   ├── 草地贴图.jpg     # 地面贴图
│   │   └── UI 元素/         # 界面素材
│   └── video/               # 视频资源
├── static/                  # 静态文件
└── favicon.ico              # 网站图标
```

### 3. `/build` - 构建配置

```
build/
└── index.js                 # 自定义构建脚本
    ├── 生产构建配置
    ├── 预览服务器（端口 9526）
    └── 包分析支持
```

### 4. `/mock` - Mock 服务

```
mock/
├── index.js                 # Mock 服务入口
├── utils.js                 # Mock 工具函数
└── modules/                 # Mock 模块
    ├── 用户相关 Mock
    └── 基于角色的 Mock 响应
```

## 主要功能模块

### 1. 3D 可视化功能
- **Three.js 集成**: 3D 场景渲染
- **模型加载**: 支持 FBX、GLTF/GLB 格式的 3D 模型
- **自定义着色器**: GLSL 着色器实现视觉效果
- **交互控制**: 3D 场景交互和操作

### 2. 数据可视化
- **ECharts 图表**: 复杂数据图表展示
- **实时监控**: 设备指标实时显示
- **性能指标**: FPS 等性能监控面板

### 3. 用户界面
- **响应式布局**: 适配不同屏幕尺寸
- **主题切换**: 支持多主题切换
- **国际化**: i18n 多语言支持框架

## 项目配置说明

### 1. `package.json` 关键信息
```json
{
  "scripts": {
    "dev": "vue-cli-service serve",
    "build:prod": "vue-cli-service build",
    "preview": "node build/index.js --preview"
  },
  "dependencies": {
    "vue": "2.6.10",
    "element-ui": "2.13.2",
    "three": "^0.133.1",
    "echarts": "4.2.1"
  }
}
```

### 2. `vue.config.js` 关键配置
- **开发端口**: 9527
- **公共路径**: '/'
- **生产环境**: 禁用 source map
- **代码分割**: Webpack 优化配置

### 3. 环境变量
- `.env.development`: 开发环境配置
- `.env.production`: 生产环境配置
- `.env.staging`: 测试环境配置

## 开发指南

### 1. 本地开发
```bash
# 安装依赖
npm install

# 启动开发服务器
npm run dev

# 访问地址: http://localhost:9527
```

### 2. 生产构建
```bash
# 构建生产版本
npm run build:prod

# 预览构建结果
npm run preview
```

### 3. 代码规范
- 使用 ESLint 进行代码质量检查
- 使用 Prettier 进行代码格式化
- 提交前自动运行 Husky Git hooks

## 项目特点

1. **专业领域**: 专注于变电站监控的数字孪生应用
2. **3D 集成**: 大量使用 Three.js 实现沉浸式 3D 体验
3. **实时监控**: 提供设备指标的仪表板显示
4. **模块化架构**: 清晰的关注点分离和可复用组件
5. **多环境支持**: 开发、测试和生产环境配置
6. **性能优化**: 大型 3D 资源的代码分割和懒加载

## 注意事项

1. **3D 资源**: 模型文件较大，注意加载性能优化
2. **浏览器兼容**: 需要 WebGL 支持的现代浏览器
3. **开发环境**: 建议使用 Node.js 14+ 版本
4. **内存使用**: 3D 场景可能占用较多内存，注意监控

## 更新日志

- **v1.0.0**: 初始版本发布，基础 3D 可视化功能
- **v1.1.0**: 添加实时数据监控
- **v1.2.0**: 优化性能，降低草地和山地光照强度
- **v1.3.0**: 修改天空盒，优化组件样式

---

> 本文档最后更新时间: 2025-12-17